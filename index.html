<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>競馬ツール</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1 id="headline">競馬ツール</h1>
    </header>

    <pre id="result"></pre>

    <table id="chkTable">
        <tr>
            <th width="30">枠</th>
            <th width="50">1着</th>
            <th width="50">2着</th>
            <th width="50">3着</th>
        </tr>

         <tr>
             <th>1</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>2</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>3</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>4</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>5</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>6</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>7</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>8</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>9</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>10</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>11</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>12</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>13</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>14</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>15</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>16</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>17</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>18</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
    </table>

    <script>
        const table = document.getElementById("chkTable");
        const result = document.getElementById("result");

        // すべてのチェックボックスに change イベントを設定
        table.querySelectorAll("input[type='checkbox']").forEach(cb => {
            cb.addEventListener("change", updateResult);
        });

        // 初期表示
        updateResult();
        
        function updateResult() {
            const rows = table.rows;
            const colCount = rows[0].cells.length;
            
            let output = "";
            
            // 列ごとに処理（1列目は行番号なので除外）
            for (let c = 1; c < colCount; c++) {
                let set = new Set();
                // 行を走査（1行目はヘッダー）
                for (let r = 1; r < rows.length; r++) {
                    const checkbox = rows[r].cells[c].querySelector("input");
                    if (checkbox.checked) {
                        const rowNumber = rows[r].cells[0].innerText;
                        set.add(rowNumber);
                    }
                }
                output += `列${c}: ${Array.from(set).join(", ")}\n`;
            }
            
            result.textContent = output;
        }
</script>
</body>
</html>
