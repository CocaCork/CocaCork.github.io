<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>競馬ツール</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1 id="headline">競馬ツール</h1>
    </header>

    <textarea id="comboOutput" rows="10" cols="40" readonly></textarea>

    <table id="chkTable">
        <tr>
            <th width="30">枠</th>
            <th width="50">1着</th>
            <th width="50">2着</th>
            <th width="50">3着</th>
        </tr>

         <tr>
             <th>1</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>2</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>3</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>4</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>5</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>6</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>7</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>8</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>9</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>10</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>11</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>12</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>13</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>14</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>15</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>16</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>17</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
        <tr>
             <th>18</th>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
             <td><input type="checkbox"></td>
         </tr>
    </table>

    <script>
        const table = document.getElementById("chkTable");
        const result = document.getElementById("comboOutput");

        // すべてのチェックボックスに change イベントを設定
        table.querySelectorAll("input[type='checkbox']").forEach(cb => {
            cb.addEventListener("change", updateCombinations);
        });

        // 初期表示
        updateCombinations();
        
        function getCheckedNumbers(colIndex) {
            const rows = table.rows;
            let result = [];
            
            for (let r = 1; r < rows.length; r++) {
                const cb = rows[r].cells[colIndex].querySelector("input");
                if (cb.checked) {
                    result.push(rows[r].cells[0].innerText);
                }
            }
            return result;
        }
        
        function updateCombinations() {
            const first  = getCheckedNumbers(1); // 1着
            const second = getCheckedNumbers(2); // 2着
            const third  = getCheckedNumbers(3); // 3着
            
            let lines = [];
            
            first.forEach(f => {
                second.forEach(s => {
                    third.forEach(t => {
                        // ★ 同一馬の重複を除外
                        if (f !== s && f !== t && s !== t) {
                            lines.push(`${f}-${s}-${t}`);
                        }
                    });
                });
            });
            
            output.value = lines.join("\n");
        }
</script>
</body>
</html>
